<system>
    log_level debug 
    rpc_endpoint 127.0.0.1:24444
</system>

<source>
    @type forward
    bind 0.0.0.0
    port 24224
</source>

<filter DemoOtelOpenSearch>
    @type parser
    key_name log
    reserve_data false
    <parse>
        @type json
    </parse>
</filter>

<match DemoOtelOpenSearch>
    @type copy
#     <store>
#         @type stdout
#     </store>    
    <store>
        @type opensearch         
        host opensearch-node1
        port 9200
        index_name ${tag}-%Y.%m.%d
        <buffer tag, time>
            timekey 5s
            flush_mode interval
            flush_interval 5s                    
        </buffer>
        
        @log_level debug
        with_transporter_log true
    </store>
</match>
